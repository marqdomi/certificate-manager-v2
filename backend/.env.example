# CMT v2.5 Environment Configuration Template
# Copy this file to .env and update with your actual values

# =============================================================================
# SECURITY KEYS (REQUIRED - Generate before deployment)
# =============================================================================

# Generate with: openssl rand -hex 32
SECRET_KEY=your_secret_key_here_32_chars_minimum

# Generate with: openssl rand -hex 32  
ENCRYPTION_KEY=your_encryption_key_here_32_chars_minimum

# JWT Configuration
JWT_SECRET=your_jwt_secret_here_32_chars_minimum
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

DATABASE_URL=postgresql://cmt_user:secure_password@db:5432/cmt_db
POSTGRES_USER=cmt_user
POSTGRES_PASSWORD=secure_password
POSTGRES_DB=cmt_db

# =============================================================================
# REDIS CONFIGURATION  
# =============================================================================

REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# =============================================================================
# LDAP/ACTIVE DIRECTORY CONFIGURATION
# =============================================================================

# LDAP Settings
LDAP_ENABLED=false
LDAP_SERVER_URL=ldap://your-domain-controller.company.com
LDAP_PORT=389
LDAP_USE_SSL=false
LDAP_USE_TLS=true
LDAP_USE_NTLM=true
LDAP_DOMAIN=company.com
LDAP_BASE_DN=DC=company,DC=com
LDAP_BIND_USER=CN=CMT Service Account,OU=Service Accounts,DC=company,DC=com
LDAP_BIND_PASSWORD=service_account_password
LDAP_USER_SEARCH_FILTER=(sAMAccountName={username})

# LDAP Role Mapping (JSON format)
# Maps AD groups to CMT roles
LDAP_ROLE_MAPPING={"CMT-SuperAdmins": "SUPER_ADMIN", "CMT-Admins": "ADMIN", "CMT-CertManagers": "CERTIFICATE_MANAGER", "CMT-F5Operators": "F5_OPERATOR", "CMT-Auditors": "AUDITOR", "CMT-Operators": "OPERATOR", "CMT-Viewers": "VIEWER"}

# =============================================================================
# AZURE AD / MICROSOFT 365 CONFIGURATION
# =============================================================================

# Azure AD Settings (OAuth2/OpenID Connect)
AZURE_AD_ENABLED=false
AZURE_AD_TENANT_ID=your-tenant-id-here
AZURE_AD_CLIENT_ID=your-client-id-here
AZURE_AD_CLIENT_SECRET=your-client-secret-here
AZURE_AD_DOMAIN=company.onmicrosoft.com

# Azure AD Role Mapping (JSON format)
# Maps Azure AD groups to CMT roles
AZURE_AD_ROLE_MAPPING={"CMT-SuperAdmins": "SUPER_ADMIN", "CMT-Admins": "ADMIN", "CMT-CertManagers": "CERTIFICATE_MANAGER", "CMT-F5Operators": "F5_OPERATOR", "CMT-Auditors": "AUDITOR", "CMT-Operators": "OPERATOR", "CMT-Viewers": "VIEWER"}

# =============================================================================
# AUTHENTICATION & SECURITY SETTINGS
# =============================================================================

# Maximum login attempts before account lockout
MAX_LOGIN_ATTEMPTS=5

# Password policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Session settings
SESSION_TIMEOUT_MINUTES=480
INACTIVE_SESSION_TIMEOUT_MINUTES=60

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment
ENVIRONMENT=production
DEBUG=false

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=structured

# API Configuration
API_V1_PREFIX=/api/v1
DOCS_URL=/docs
OPENAPI_URL=/openapi.json

# =============================================================================
# F5 DEVICE CONFIGURATION
# =============================================================================

# Default F5 settings
F5_DEFAULT_USERNAME=admin
F5_DEFAULT_TIMEOUT=30
F5_MAX_CONCURRENT_CONNECTIONS=5

# Certificate settings
CERT_UPLOAD_MAX_SIZE=10485760  # 10MB
CERT_ALLOWED_FORMATS=pem,crt,p12,pfx

# =============================================================================
# EMAIL CONFIGURATION (Optional - for notifications)
# =============================================================================

EMAIL_ENABLED=false
SMTP_SERVER=smtp.company.com
SMTP_PORT=587
SMTP_USERNAME=cmt-notifications@company.com
SMTP_PASSWORD=smtp_password
SMTP_USE_TLS=true
EMAIL_FROM=cmt-notifications@company.com

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================

# Application Performance Monitoring
APM_ENABLED=false
APM_SERVICE_NAME=cmt-v25
APM_ENVIRONMENT=production

# Metrics
METRICS_ENABLED=false
METRICS_PORT=8080

# Health checks
HEALTH_CHECK_INTERVAL=300  # seconds

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Container settings
CONTAINER_PORT=8000
WORKER_PROCESSES=4
WORKER_THREADS=2

# Proxy settings (if behind reverse proxy)
PROXY_HEADERS=true
FORWARDED_ALLOW_IPS=*

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Backup settings
BACKUP_ENABLED=false
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.

# =============================================================================
# DEVELOPMENT SETTINGS (Remove in production)
# =============================================================================

# Only for development - remove these in production
DEV_RELOAD=false
DEV_DEBUG_TOOLBAR=false

# =============================================================================
# EXAMPLE SECURE KEY GENERATION COMMANDS:
# =============================================================================
# 
# Generate SECRET_KEY:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# Generate ENCRYPTION_KEY: 
# python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# Generate JWT_SECRET:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# Generate strong passwords:
# python -c "import secrets; print(secrets.token_urlsafe(16))"
#
# =============================================================================